<!DOCTYPE html>
<html lang="en">

<head>

</head>

<body>
  <nav>
    <div>
      <div>
        <a href="#">TGIF</a>
      </div>
      <ul>
        <li><a href="#">Home</a></li>
        <li>
          <a href="#">Congress 113</a>
          <ul>
            <li><a href="#">Senate</a></li>
            <li><a href="#">House</a></li>
          </ul>
        </li>
        <li>
          <a href="#">Attendance</a></li>
        <ul>
          <li><a href="#">Senate</a></li>
          <li><a href="#">House</a></li>
        </ul>
        </li>
        <li>
          <a href="#">Party Loyalty</a>
          <ul>
            <li><a href="#">Senate</a></li>
            <li><a href="#">House</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </nav>

  <header>
    <div>
    </div>
  </header>
  <!--Table container-->
  <div>
    <h2>Attendance</h2>
    <p>The Constitution specifies that a majority of members constitutes a quorum to do business in each house.
      Representatives and senators rarely force the presence of a quorum by demanding quorum calls; thus, in most cases,
      debates continue even if a majority is not present.</p>

    <p>The Senate uses roll-call votes; a clerk calls out the names of all the senators, each senator stating "aye" or
      "no" when his or her name is announced. The House reserves roll-call votes for the most formal matters, as a
      roll-call of all 435 representatives takes quite some time; normally, members vote by electronic device. In the
      case of a tie, the motion in question fails. In the Senate, the Vice President may (if present) cast the
      tiebreaking vote.</p>

    <h2>Senate at a glance</h2>
    <table>
      <thead>
        <tr>
          <th>Party</th>
          <th>Number of Reps</th>
          <th>% Voted with Prty</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Republican</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>Democrat</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>Independent</td>
          <td>--</td>
          <td>--</td>
        </tr>
      </tbody>
    </table>

    <h2>Least Engaged (Bottom 10% Attendance)</h2>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Number of Missed Votes</th>
          <th>% Missed</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
      </tbody>
    </table>

    <h2>Most Engaged (Top 10% Attendance)</h2>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Number of Missed Votes</th>
          <th>% Missed</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
        <tr>
          <td>--</td>
          <td>--</td>
          <td>--</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <script src="scripts/pro-congress-113-senate.js"></script>
  <script>
    "use strict";

    const estadisticas = {
      "number-of-democrats": 0,
      "number-of-republicans": 0,
      "number-of-independents": 0,
      "total": 0,
      "democrats-average-votes-with-party": 0,
      "republicans-average-votes-with-party": 0,
      "independents-average-votes-with-party": 0,
      "total-average": 0,
      "least-engaged": [],
      "most-engaged": [],
      "least-loyal": [],
      "most-loyal": []
    };

    const miembrosTotales = {
      miembros: null,
      republicanos: null,
      democratas: null,
      independientes: null,

      inicializarMiembros: function () {
        this.miembros = data.results[0].members;
        this.republicanos = this.miembros.filter(m => m.party === 'R');
        this.democratas = this.miembros.filter(m => m.party === 'D');
        this.independientes = this.miembros.filter(m => m.party === 'I');
      }
    };

    function votoPromedioConPartido(miembrosDelPartido) {
      return miembrosDelPartido.reduce((m1, m2) => m1.votes_with_party_pct + m2.votes_with_party_pct) / miembrosDelPartido.length;
    }

    function votosTotales() {
      return miembrosTotales.democratas.length + miembrosTotales.independientes.length + miembrosTotales.republicanos.length;
    }

    function pctMejorAsistencia(porcentaje) {
      let longitudLista, cantMinimaMiembros, valorLimite;

      longitudLista = miembrosTotales.miembros.length;
      cantMinimaMiembros = Math.round(longitudLista * (porcentaje/100));

      miembrosTotales.miembros.sort((m1, m2) => m2.votes_with_party_pct - m1.votes_with_party_pct);

      valorLimite = miembrosTotales.miembros[cantMinimaMiembros - 1];

    }

    function pctPeorAsistencia(porcentaje) {

    }

    function cargarEstadisticas() {
      estadisticas["number-of-democrats"] = miembrosTotales.democratas.length;
      estadisticas["number-of-independents"] = miembrosTotales.independientes.length;
      estadisticas["number-of-republicans"] = miembrosTotales.republicanos.length;

      estadisticas["total"] = votosTotales();
    }

    miembrosTotales.inicializarMiembros();
    cargarEstadisticas();
    pctMejorAsistencia(10);

    console.log(miembrosTotales.miembros);
  </script>
</body>

</html>